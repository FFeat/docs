# Redis基本教程
>
>Redis 是一个数据结构服务器。Redis 的核心是提供一组原生数据类型，可帮助解决从缓存到队列再到事件处理的各种问题

## 键 Keys

Redis 密钥是二进制安全的，这意味着可以使用任何二进制串行作为key，从像“foo”这样的字符串到 JPEG 文档的内容。空字符串也是有效的键。

其他规则：

1. 不要设置太长的key。*如1024字节的不仅在内存占用高，而且在查找Key时需要昂贵的资源比较。*
2. 不要设置太短的key。*"`user:1000:followers`"的可读性高于"`u1000flw`，不简写增加的空间也很少，需要有一个合理的权衡。"*

## 字符串 Strings

Redis 字符串类型是可以与 Redis 键关联的最简单的值类型。

由于 Redis 键是字符串，因此当我们也将字符串类型用作值时，将一个字符串映射到另一个字符串。
字符串数据类型对于许多用例都很有用，*例如缓存 HTML 片段或页面。*

用redis-cli演示如下操作：

``` redis-cli
> set mykey somevalue
OK
> get mykey
"somevalue"
```

如上所示，使用 `SET` 和 `GET` 命令是设置和查询字符串值的方式。
**请注意，如果键已存在，`SET` 将替换已存储到键中的任何现有值，即使键与非字符串值相关联也是如此。因此，`SET`执行分配。**

值可以是各种字符串（包括二进制数据），*例如，可以将 jpeg 图像存储在值中。**值不能大于 512 MB**。*

`SET` 命令还有比较有趣的选项，这些选项作为附加参数提供。

例如，如果密钥已经存在，我可能会要求 SET 失败，或者相反，只有当密钥已经存在时，它才会成功：

```redis-cli
> set mykey newval nx
(nil)
> set mykey newval xx
OK
```

即使字符串是 Redis 的基本值，也可以使用它们执行一些有趣的操作。

例如，一个是原子性增长：

``` redis-cli
> set counter 100
OK
> incr counter
(integer) 101
> incr counter
(integer) 102
> incrby counter 50
(integer) 152
```

`INCR` 命令将字符串值解析为整数，递增 1，最后将获取的值设置为新值。还有其他类似的命令，如`INCRBY`，`DECR`和`DECRBY`。在内部，它总是相同的命令，但以略有不同的方式起作用。

**为什么说`INCR`是原子性的？**
即使针对同一key发出 `INCR`的多个客户端也永远不会进入争用条件。*例如，客户端 1 和客户端 2 同时读取到“10”，两者都递增到 11，并将新值设置为 11，这种情况永远不会发生。最终值将始终为 12，并且在所有其他客户端未同时执行命令时执行读取-增量-集操作。*

有许多命令可用于对字符串进行操作。例如，`GETSET` 命令将键设置为新值，返回旧值作为结果。*例如，如果您的系统在每次您的网站收到新访问者时都使用 `INCR` 递增 Redis Key，则可以使用此命令。您可能希望每小时收集一次此信息，而不会丢失单个增量。您可以 `GETSET` 键，为其分配新值“0”并读回旧值。*

在一个命令中批量查询或修改多个键值对，可以使用`MSET`和`MGET`。这会有助于降低延迟。
`MGET`会以一个值的数组形式返回。

``` redis-cli
> mset a 10 b 20 c 30
OK
> mget a b c
1) "10"
2) "20"
3) "30"
```
